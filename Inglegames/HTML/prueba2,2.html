<!DOCTYPE html>
<html>
<head>
    <title>Inglegames</title>
</head>
<body>

<div class="cubo">
    <div class="cubo1">

        <div class="auto">
            <div class="texto" id="textoNumero"></div> 
            <img src="../imagenes/imagen742.png">
        </div>

        <div class="libreta">
            <button class="verificacion">VERIFICACION</button>
            <div class="arriba">
                <div class="metal"></div>
            </div>
            <div class="madera">
                <div class="papel">
                    <button class="empezar" id="btnEmpezar" onclick="iniciarJuego()">EMPEZAR</button>
                    <input type="number" id="respuestaUsuario">
                </div>
            </div>
            <div class="puntos">
                <div class="correcto">C: <span id="correctos">0</span></div>
                <div class="incorrecto">F: <span id="incorrectos">0</span></div>
            </div>
            <div class="tiempo" id="tiempo">2:00</div>
        </div>

    </div>
</div>

<div id="resultado" class="res" style="display: none;">
    <h2>Juego terminado</h2>
    <p>Puntuación final: <span id="puntajeFinal"></span></p>
    <p>Nota: <span id="nota"></span></p>
    <div class="botones">
        <button class="boton2" onclick="location.reload()">Reiniciar</button>
        <button class="boton2" onclick="salir()">Escoger otro</button>
    </div>
</div>

<style>
    @import url("../CSS/prueba2,2.css")
</style>

<script>
    let tiempo = 180;
    let interval;
    let correctos = 0;
    let incorrectos = 0;
    let numeroActual = 0;
    let racha = 0;
    let modoDoblePuntos = false;

    const numeros = [
        "", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten",
        "eleven", "twelve", "thirteen", "fourteen", "fifteen", "sixteen", "seventeen", "eighteen", "nineteen", "twenty",
        "twenty-one", "twenty-two", "twenty-three", "twenty-four", "twenty-five", "twenty-six", "twenty-seven", "twenty-eight", "twenty-nine", "thirty",
        "thirty-one", "thirty-two", "thirty-three", "thirty-four", "thirty-five", "thirty-six", "thirty-seven", "thirty-eight", "thirty-nine", "forty",
        "forty-one", "forty-two", "forty-three", "forty-four", "forty-five", "forty-six", "forty-seven", "forty-eight", "forty-nine", "fifty",
        "fifty-one", "fifty-two", "fifty-three", "fifty-four", "fifty-five", "fifty-six", "fifty-seven", "fifty-eight", "fifty-nine", "sixty",
        "sixty-one", "sixty-two", "sixty-three", "sixty-four", "sixty-five", "sixty-six", "sixty-seven", "sixty-eight", "sixty-nine", "seventy",
        "seventy-one", "seventy-two", "seventy-three", "seventy-four", "seventy-five", "seventy-six", "seventy-seven", "seventy-eight", "seventy-nine", "eighty",
        "eighty-one", "eighty-two", "eighty-three", "eighty-four", "eighty-five", "eighty-six", "eighty-seven", "eighty-eight", "eighty-nine", "ninety",
        "ninety-one", "ninety-two", "ninety-three", "ninety-four", "ninety-five", "ninety-six", "ninety-seven", "ninety-eight", "ninety-nine", "one hundred"
    ];

    function pronunciarTexto(texto) {
        const utterance = new SpeechSynthesisUtterance(texto);
        utterance.lang = "en-US";
        utterance.rate = 0.9;
        speechSynthesis.speak(utterance);
    }

   function nuevoNumero() {
    numeroActual = Math.floor(Math.random() * (numeros.length - 1)) + 1;
    const palabraSeleccionada = numeros[numeroActual];
    const textoElem = document.getElementById('textoNumero');

    
    textoElem.innerText = modoDoblePuntos ? ` ` : palabraSeleccionada;


    pronunciarTexto(palabraSeleccionada);
}


   document.querySelector(".verificacion").addEventListener("click", function () {
    let respuestaUsuario = parseInt(document.getElementById("respuestaUsuario").value);
    const textoElem = document.getElementById("textoNumero");

    if (respuestaUsuario === numeroActual) {
        racha++;

        if (modoDoblePuntos) {
            correctos += 2;
        } else {
            correctos += 1;
        }

        // Activar modo racha si se alcanza racha de 5
        if (racha >= 5 && !modoDoblePuntos) {
            modoDoblePuntos = true;
            textoElem.innerText = "¡Racha! Doble puntaje";
            textoElem.style.color = "purple";
            
            
            setTimeout(() => {
                nuevoNumero();
            }, 1500);

            actualizarPuntos();
            limpiarRespuesta();
            return;
        }

        textoElem.innerText = "¡Correcto!";
        textoElem.style.color = "purple";
  
    } else {
        incorrectos++;
        racha = 0;

        if (modoDoblePuntos) {
            modoDoblePuntos = false;
        }

        textoElem.innerText = "Incorrecto";
        textoElem.style.color = "purple";
        
    }

    actualizarPuntos();
    limpiarRespuesta();

    setTimeout(() => {
        nuevoNumero();
    }, 1000);

    function actualizarPuntos() {
    document.getElementById("correctos").innerText = correctos;
    document.getElementById("incorrectos").innerText = incorrectos;
}

function limpiarRespuesta() {
    document.getElementById("respuestaUsuario").value = '';
}


});


    function iniciarTemporizador() {
        interval = setInterval(function () {
            if (tiempo > 0) {
                tiempo--;
                let minutos = Math.floor(tiempo / 60);
                let segundos = tiempo % 60;
                document.getElementById('tiempo').innerText =
                    `${minutos.toString().padStart(2, '0')}:${segundos.toString().padStart(2, '0')}`;
            } else {
                clearInterval(interval);
                finalizarJuego();
            }
        }, 1000);
    }

    function iniciarJuego() {
        document.getElementById("btnEmpezar").style.display = "none";
        correctos = 0;
        incorrectos = 0;
        racha = 0;
        modoDoblePuntos = false;
        document.getElementById("correctos").innerText = correctos;
        document.getElementById("incorrectos").innerText = incorrectos;
        tiempo = 180;
        document.getElementById("tiempo").innerText = "2:00";
        clearInterval(interval);
        iniciarTemporizador();
        nuevoNumero();
    }

    function finalizarJuego() {
        clearInterval(interval);
        const resultadoFinal = correctos - incorrectos;
        let nota;

        if (resultadoFinal >= 20) {
            nota = "A";
        } else if (resultadoFinal >= 10) {
            nota = "B";
        } else if (resultadoFinal >= 5) {
            nota = "C";
        } else {
            nota = "F";
        }

        document.getElementById('puntajeFinal').innerText = ` ${resultadoFinal}`;
        document.getElementById('nota').innerText = nota;
        document.getElementById('resultado').style.display = 'block';
    }

    function salir() {
        window.location.href = "Inglegames2.html";
    }
</script>


</body>
</html>
