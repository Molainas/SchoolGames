<!DOCTYPE html>
<html>
<head>
    <title>Inglegames</title>
</head> 
<body>
<div class="cubo">

<div class="cubo1">
    <div class="ventana">
        <div class="ventanilla">
            <img src="../imagenes/soliado.png" class="img5">
        </div>
        <div id="mensajeRespuesta" style="
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: white;
    color: purple;
    padding: 10px 20px;
    border: 2px solid #000;
    border-radius: 10px;
    font-size: 24px;
    font-weight: bold;
    display: none;
    z-index: 1000;">
</div>

    </div>
    <div class="peque√±in">
        <img src="../imagenes/eret.png" class="img1">
    </div>
    <div class="closet">
        <div class="manitas">
            <img src="../imagenes/manitas.png" class="img3">
        </div>
        <div class="adentro">
            <img src="../imagenes/puerta1.png" class="img2">
            <button class="ropa" data-respuesta="SUNNY">
                <img src="../imagenes/ropa1.png" class="img4">
            </button>
            <button class="ropa" data-respuesta="RAINY">
                <img src="../imagenes/ropa2.png" class="img4">
            </button>
            <button class="ropa" data-respuesta="CLOUDY">
                <img src="../imagenes/ropa3.png" class="img4">
            </button>
            <img src="../imagenes/puerta2.png" class="img2">
        </div>
    </div>
</div>  

<div class="cubo2">
    <div class="correcto">C: <span id="correctos">0</span></div>
    <div class="tiempo" id="tiempo">5:00</div>
     <button class="empezar" id="btnEmpezar" onclick="iniciarJuego()">EMPEZAR</button>
    <div class="incorrecto">F: <span id="incorrectos">0</span></div>
</div>

</div>

<div id="resultado" class="res" style="display: none;">
    <h2>Juego terminado</h2>
    <p>Puntuacion final: <span id="puntajeFinal"></span></p>
    <p>Nota: <span id="nota"></span></p>
    <div class="botones">
        <button class="boton2" onclick="location.reload()">Reiniciar</button>
        <button class="boton2" onclick="salir()">Escoger otro</button>
    </div>
</div>

<style>
    @import url("../CSS/prueba5.css");
</style>

<script>
let tiempo = 300;
let interval;
let correctos = 0, incorrectos = 0;

function iniciarTemporizador() {
    interval = setInterval(function () {
        if (tiempo > 0) {
            tiempo--;
            let minutos = Math.floor(tiempo / 60);
            let segundos = tiempo % 60;
            document.getElementById('tiempo').innerText = `${minutos.toString().padStart(2, '0')}:${segundos.toString().padStart(2, '0')}`;
        } else {
            clearInterval(interval);
            finalizarJuego();
        }
    }, 1000);
}

function mostrarMensaje(texto, esCorrecto) {
    const mensaje = document.getElementById("mensajeRespuesta");
    mensaje.textContent = texto;
    mensaje.style.backgroundColor = esCorrecto ? "" : ""; 
    mensaje.style.borderColor = esCorrecto ? "" : ""; 
    mensaje.style.display = "block";

    
    setTimeout(() => {
        mensaje.style.display = "none";
    }, 1500);
}


function iniciarJuego() {
        document.getElementById("btnEmpezar").style.display = "none";
        correctos = 0;
        incorrectos = 0;
        document.getElementById("correctos").innerText = correctos;
        document.getElementById("incorrectos").innerText = incorrectos;
        tiempo = 300;
        document.getElementById("tiempo").innerText = "5:00";

        clearInterval(interval);
        iniciarTemporizador();
        decirTexto(texto);
    }

function finalizarJuego() {
    clearInterval(interval);
    const resultadoFinal = correctos - incorrectos;
    let nota;

    if (resultadoFinal >= 20) {
        nota = "A";
    } else if (resultadoFinal >= 10) {
        nota = "B";
    } else if (resultadoFinal >= 5) {
        nota = "C";
    } else {
        nota = "F";
    }

    document.getElementById('puntajeFinal').innerText = resultadoFinal;
    document.getElementById('nota').innerText = nota;
    document.getElementById('resultado').style.display = 'block';
}

function salir() {
    window.location.href = "Inglegames.html";
}

// üîä Funci√≥n para decir el clima con voz sintetizada
function decirTexto(texto) {
    const utterance = new SpeechSynthesisUtterance(texto);
    utterance.lang = "en-US";
    utterance.rate = 0.9;
    speechSynthesis.speak(utterance);
}

document.addEventListener("DOMContentLoaded", () => {
    const climaImg = document.querySelector(".ventanilla img");
    const botonesRopa = document.querySelectorAll(".ropa");
    const correctosSpan = document.getElementById("correctos");
    const incorrectosSpan = document.getElementById("incorrectos");

    const climas = [
        { nombre: "SUNNY", imagen: "soliado.png" },
        { nombre: "RAINY", imagen: "lluvioso.png" },
        { nombre: "CLOUDY", imagen: "nublado.png" }
    ];

    let climaActual = climas[0];

    function cambiarClima() {
        const indice = Math.floor(Math.random() * climas.length);
        climaActual = climas[indice];
        climaImg.src = `../imagenes/${climaActual.imagen}`;
        decirTexto(climaActual.nombre); // üîä Decir clima
    }


   botonesRopa.forEach(boton => {
    boton.addEventListener("click", () => {
        const respuestaJugador = boton.getAttribute("data-respuesta");

        if (respuestaJugador === climaActual.nombre) {
            correctos++;
            correctosSpan.textContent = correctos;
            mostrarMensaje("¬°Correcto!", true); // ‚úÖ Mostrar mensaje
        } else {
            incorrectos++;
            incorrectosSpan.textContent = incorrectos;
            mostrarMensaje("Incorrecto", false); // ‚ùå Mostrar mensaje
        }

        cambiarClima();
    });
});


    cambiarClima();
});


</script>

</body>
</html>
