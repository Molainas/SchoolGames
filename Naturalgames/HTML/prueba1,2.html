<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naturalgames</title>
</head>
<body>

<div class="cubo">
    <div class="puntos">
        <div class="correcto">C: <span id="correctos">0</span></div>
        <div class="tiempo" id="tiempo">5:00</div>
        <div class="incorrecto">F: <span id="incorrectos">0</span></div>
    </div>

    <div class="cubo1">
        <div class="pequeñin">
            <img src="../imagenes/peque2.png" class="peque">
        </div>

        <div class="cubo2">
            <div class="caja1" data-tipo="vivo" ondrop="soltar(event)" ondragover="permitirSoltar(event)">
                <img src="../imagenes/caja1,2.png" class="caja">
            </div>

            <div class="carta">
                <div class="ser" draggable="true" ondragstart="arrastrar(event)" id="carta0" data-index="0">
                    <div class="texto" id="nombre0"></div>
                    <canvas id="canvasCarta0" width="300" height="150"></canvas>
                </div>
                <div class="ser" draggable="true" ondragstart="arrastrar(event)" id="carta1" data-index="1">
                    <div class="texto" id="nombre1"></div>
                    <canvas id="canvasCarta1" width="300" height="150"></canvas>
                </div>
                <div class="ser" draggable="true" ondragstart="arrastrar(event)" id="carta2" data-index="2">
                    <div class="texto" id="nombre2"></div>
                    <canvas id="canvasCarta2" width="300" height="150"></canvas>
                </div>
            </div>

            <div class="caja2" data-tipo="no vivo" ondrop="soltar(event)" ondragover="permitirSoltar(event)">
                <img src="../imagenes/caja2,2.png" class="caja">
            </div>
        </div>
    </div>
</div>

<div id="resultado" class="res" style="display:none;">
    <h2>Juego terminado</h2>
    <p>Puntuación final: <span id="puntajeFinal"></span></p>
    <p>Nota: <span id="nota"></span></p>
    <div class="botones">
        <button class="boton2" onclick="location.reload()">Reiniciar</button>
        <button class="boton2" onclick="salir()">Escoger otro</button>
    </div>
</div>

<style>
    @import url("../CSS/prueba1,2.css")
</style>

<script>
    
 function dibujarFlor(ctx) {
  const cx = 150, cy = 75;
  ctx.fillStyle = "green";

  // Pétalos
  for (let i = 0; i < 8; i++) {
    let angle = i * Math.PI / 4;
    let x = cx + 50 * Math.cos(angle);
    let y = cy + 30 * Math.sin(angle);
    ctx.beginPath();
    ctx.arc(x, y, 30, 0, 2 * Math.PI);
    ctx.fill();
  }

  // Centro
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(cx, cy, 25, 0, 2 * Math.PI);
  ctx.fill();

}

function dibujarPajaro(ctx) {
  const cx = 150, cy = 100;

  // Cuerpo
  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.ellipse(cx, cy, 30, 22, 0, 0, 2 * Math.PI);
  ctx.fill();

  // Cabeza
  ctx.beginPath();
  ctx.arc(cx + 25, cy - 20, 15, 0, 2 * Math.PI);
  ctx.fill();

  // Ala
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.ellipse(cx - 10, cy, 14, 10, 0, 0, 2 * Math.PI);
  ctx.fill();

  // Pico (más definido)
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.moveTo(cx + 40, cy - 20);
  ctx.lineTo(cx + 50, cy - 17);
  ctx.lineTo(cx + 40, cy - 14);
  ctx.closePath();
  ctx.fill();

  // Patas
  ctx.strokeStyle = "yellow";
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(cx - 10, cy + 22);
  ctx.lineTo(cx - 10, cy + 30);
  ctx.moveTo(cx + 10, cy + 22);
  ctx.lineTo(cx + 10, cy + 30);
  ctx.stroke();

  // Ojo con brillo
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(cx + 22, cy - 24, 4, 0, 2 * Math.PI);
  ctx.fill();
  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.arc(cx + 22, cy - 24, 2, 0, 2 * Math.PI);
  ctx.fill();

}



function dibujarPez(ctx) {
  const cx = 150, cy = 100;

  // Cuerpo con sombra
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.ellipse(cx, cy, 40, 25, 0, 0, 2 * Math.PI);
  ctx.fill();

  // Aleta trasera (cola en forma de abanico)
  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.moveTo(cx - 40, cy);
  ctx.lineTo(cx - 60, cy - 15);
  ctx.lineTo(cx - 60, cy + 15);
  ctx.closePath();
  ctx.fill();

  // Ojo blanco
  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.arc(cx + 20, cy - 8, 5, 0, 2 * Math.PI);
  ctx.fill();

  // Pupila
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(cx + 20, cy - 8, 2, 0, 2 * Math.PI);
  ctx.fill();

}

function dibujarTortuga(ctx) {
  const cx = 150, cy = 75;

  // Cabeza
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(cx + 32, cy, 8, 0, 2 * Math.PI);
  ctx.fill();

  // Patas
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(cx - 20, cy - 15, 5, 0, 2 * Math.PI); // delantera izquierda
  ctx.arc(cx + 20, cy - 15, 5, 0, 2 * Math.PI); // delantera derecha
  ctx.arc(cx - 20, cy + 15, 5, 0, 2 * Math.PI); // trasera izquierda
  ctx.arc(cx + 20, cy + 15, 5, 0, 2 * Math.PI); // trasera derecha
  ctx.fill();

  // Cola
  ctx.beginPath();
  ctx.moveTo(cx - 30, cy);
  ctx.lineTo(cx - 38, cy - 5);
  ctx.lineTo(cx - 30, cy + 5);
  ctx.closePath();
  ctx.fill();

   // Caparazón
  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.ellipse(cx, cy, 30, 20, 0, 0, 2 * Math.PI);
  ctx.fill();

  // Ojo
  ctx.fillStyle = "";
  ctx.beginPath();
  ctx.arc(cx + 34, cy - 3, 2, 0, 2 * Math.PI);
  ctx.fill();
}

function dibujarRana(ctx) {
  const w = ctx.canvas.width;
  const h = ctx.canvas.height;
  ctx.clearRect(0, 0, w, h); // Limpia el canvas

  const cx = w / 2;
  const cy = h / 2;

  // --- Cabeza ---
  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.arc(cx, cy, 50, 0, 2 * Math.PI);
  ctx.fill();

  // --- Ojos (blancos) ---
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(cx - 40, cy - 40, 15, 0, 2 * Math.PI);
  ctx.arc(cx + 40, cy - 40, 15, 0, 2 * Math.PI);
  ctx.fill();

  // --- Pupilas (negras) ---
  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.arc(cx - 40, cy - 40, 8, 0, 2 * Math.PI);
  ctx.arc(cx + 40, cy - 40, 8, 0, 2 * Math.PI);
  ctx.fill();

  // --- Boca sonriente ---
  ctx.strokeStyle = "yellow";
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.arc(cx, cy + 5, 30, 0, Math.PI);
  ctx.stroke();

  // --- Mejillas ---
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(cx - 50, cy + 5, 15, 0, 2 * Math.PI);
  ctx.arc(cx + 50, cy + 5, 15, 0, 2 * Math.PI);
  ctx.fill();

}



function dibujarBacteria(ctx) {
  const cx = 150, cy = 75;

  // Cuerpo ovalado
  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.ellipse(cx, cy, 40, 20, 0, 0, 2 * Math.PI);
  ctx.fill();

  // Núcleo
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(cx - 10, cy, 5, 0, 2 * Math.PI);
  ctx.fill();

  // Plásmidos
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(cx + 10, cy - 5, 3, 0, 2 * Math.PI);
  ctx.fill();
  ctx.beginPath();
  ctx.arc(cx + 15, cy + 5, 3, 0, 2 * Math.PI);
  ctx.fill();

}


function dibujarMariposa(ctx) {
  const cx = 150, cy = 75;

  // Alas izquierdas
  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.ellipse(cx - 30, cy - 15, 50, 30, Math.PI / 4, 0, 2 * Math.PI);
  ctx.fill();

  ctx.beginPath();
  ctx.ellipse(cx - 25, cy + 20, 35, 30, -Math.PI / 4, 0, 2 * Math.PI);
  ctx.fill();

  // Alas derechas
  ctx.beginPath();
  ctx.ellipse(cx + 30, cy - 15, 50, 30, -Math.PI / 4, 0, 2 * Math.PI);
  ctx.fill();

  ctx.beginPath();
  ctx.ellipse(cx + 25, cy + 20, 35, 30, Math.PI / 4, 0, 2 * Math.PI);
  ctx.fill();

  // Cuerpo
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.ellipse(cx, cy, 8, 35, 0, 0, 2 * Math.PI);
  ctx.fill();

  // Antenas
  ctx.strokeStyle = "yellow";
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(cx - 5, cy - 35);
  ctx.quadraticCurveTo(cx - 15, cy - 50, cx - 10, cy - 60);
  ctx.moveTo(cx + 5, cy - 35);
  ctx.quadraticCurveTo(cx + 15, cy - 50, cx + 10, cy - 60);
  ctx.stroke();

  // Detalles en las alas
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(cx - 30, cy - 10, 6, 0, 2 * Math.PI);
  ctx.fill();
  ctx.beginPath();
  ctx.arc(cx + 30, cy - 10, 6, 0, 2 * Math.PI);
  ctx.fill();
  ctx.beginPath();
  ctx.arc(cx - 35, cy + 25, 4, 0, 2 * Math.PI);
  ctx.fill();
  ctx.beginPath();
  ctx.arc(cx + 35, cy + 25, 4, 0, 2 * Math.PI);
  ctx.fill();
}


function dibujarPulpo(ctx) {
  const cx = 150, cy = 75;
  
  // Cabeza
  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.arc(cx, cy - 10, 40, 10, Math.PI, true); // cabeza semiesférica
  ctx.fill();

  // Tentáculos
  for (let i = -2; i <= 2; i++) {
    ctx.beginPath();
    ctx.moveTo(cx + i * 10, cy + 20);
    ctx.quadraticCurveTo(cx + i * 10 + 5, cy + 50, cx + i * 50, cy + 30);
    ctx.strokeStyle = "green";
    ctx.lineWidth = 10;
    ctx.stroke();
  }

  // Ojos
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(cx - 10, cy - 15, 5, 0, 2 * Math.PI);
  ctx.arc(cx + 10, cy - 15, 5, 0, 2 * Math.PI);
  ctx.fill();

  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.arc(cx - 10, cy - 15, 2, 0, 2 * Math.PI);
  ctx.arc(cx + 10, cy - 15, 2, 0, 2 * Math.PI);
  ctx.fill();
}

function dibujarArana(ctx) {
  const cx = 150, cy = 100;

  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);

  // Cuerpo (abdomen)
  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.ellipse(cx, cy + 10, 20, 20, 0, 0, Math.PI * 2);
  ctx.fill();

  // Cabeza
  ctx.beginPath();
  ctx.ellipse(cx, cy - 10, 20, 20, 0, 0, Math.PI * 2);
  ctx.fill();

  // Ojos (8 pequeños)
  ctx.fillStyle = "yellow";
  const eyePositions = [
    [-12, -15], [-4, -17], [4, -17], [12, -15],
    [-12, -5], [-4, -7], [4, -7], [12, -5],
  ];
  eyePositions.forEach(([dx, dy]) => {
    ctx.beginPath();
    ctx.arc(cx + dx, cy + dy, 3, 0, Math.PI * 2);
    ctx.fill();
  });

  // Pupilas
  ctx.fillStyle = "green";
  eyePositions.forEach(([dx, dy]) => {
    ctx.beginPath();
    ctx.arc(cx + dx, cy + dy, 1.5, 0, Math.PI * 2);
    ctx.fill();
  });

  // Patas (4 a cada lado)
  ctx.strokeStyle = "green";
  ctx.lineWidth = 2;
  const legLength = 30;

  for (let i = 0; i < 4; i++) {
    const offsetY = (i - 1.5) * 10;

    // Izquierda
    ctx.beginPath();
    ctx.moveTo(cx - 20, cy + offsetY);
    ctx.lineTo(cx - 40, cy + offsetY - 10);
    ctx.lineTo(cx - 55, cy + offsetY);
    ctx.stroke();

    // Derecha
    ctx.beginPath();
    ctx.moveTo(cx + 20, cy + offsetY);
    ctx.lineTo(cx + 40, cy + offsetY - 10);
    ctx.lineTo(cx + 55, cy + offsetY);
    ctx.stroke();
  }

  // Hilo que la sostiene
  ctx.strokeStyle = "yellow";
  ctx.lineWidth = 1;
  ctx.beginPath();
  ctx.moveTo(cx, 0);
  ctx.lineTo(cx, cy - 30);
  ctx.stroke();
}



/////////////////////////////////////////////

  function dibujarRoca(ctx) {
    const cx = 150, cy = 75;
    ctx.fillStyle = "yellow";
    ctx.beginPath();
    ctx.moveTo(cx - 30, cy + 10);
    ctx.lineTo(cx - 15, cy - 30);
    ctx.lineTo(cx + 10, cy - 20);
    ctx.lineTo(cx + 30, cy + 5);
    ctx.lineTo(cx, cy + 25);
    ctx.closePath();
    ctx.fill();
  }

  function dibujarAuto(ctx) {
    const cx = 150, cy = 75;
    ctx.fillStyle = "yellow";
    ctx.fillRect(cx - 75, cy - 10, 150, 30); // cuerpo
    ctx.fillRect(cx - 60, cy - 20, 120, 10); // techo

    ctx.fillStyle = "green";
    ctx.beginPath();
    ctx.arc(cx - 49, cy + 20, 10, 5, 5 * Math.PI);
    ctx.fill();

    ctx.beginPath();
    ctx.arc(cx + 49, cy + 20, 10, 5, 5 * Math.PI);
    ctx.fill();
  }

function dibujarLadrillo(ctx) {
  const cx = 150, cy = 75;
  ctx.fillStyle = "green";
  ctx.fillRect(cx - 30, cy - 10, 60, 20);
}

function dibujarCasa(ctx) {
  const cx = 150, cy = 75;
  ctx.fillStyle = "green";
  ctx.fillRect(cx - 30, cy, 60, 40); // base
  ctx.fillStyle = "yellow";
  ctx.beginPath(); // techo
  ctx.moveTo(cx - 35, cy);
  ctx.lineTo(cx, cy - 30);
  ctx.lineTo(cx + 35, cy);
  ctx.closePath();
  ctx.fill();
}

function dibujarCamara(ctx) {
  const cx = 150, cy = 75;

  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);

  // Cuerpo principal de la cámara
  ctx.fillStyle = "yellow";
  ctx.fillRect(cx - 40, cy - 20, 80, 40);

  // Detalle superior (flash)
  ctx.fillStyle = "green";
  ctx.fillRect(cx + 25, cy - 30, 15, 10);


  // Lente principal (verde con borde oscuro)
  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.arc(cx, cy, 15, 0, Math.PI * 2);
  ctx.fill();

  // Borde del lente
  ctx.strokeStyle = "green";
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.arc(cx, cy, 15, 0, Math.PI * 2);
  ctx.stroke();

  // Lente interno (profundidad)
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(cx, cy, 8, 0, Math.PI * 2);
  ctx.fill();


}


function dibujarMesa(ctx) {
  const cx = 150, cy = 75;
  ctx.fillStyle = "yellow";
  ctx.fillRect(cx - 40, cy - 10, 80, 10); // tabla
  ctx.fillRect(cx - 35, cy, 5, 20); // patas
  ctx.fillRect(cx + 30, cy, 5, 20);
}

function dibujarComputadora(ctx) {
  const cx = 150, cy = 75;

  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);

  // Monitor exterior (marco)
  ctx.fillStyle = "yellow";
  ctx.fillRect(cx - 40, cy - 25, 80, 50);

  // Pantalla interior
  ctx.fillStyle = "green";
  ctx.fillRect(cx - 35, cy - 20, 70, 40);

  // Soporte del monitor
  ctx.fillStyle = "yellow";
  ctx.fillRect(cx - 10, cy + 25, 20, 10);

  // Base del monitor
  ctx.fillStyle = "yellow";
  ctx.fillRect(cx - 30, cy + 35, 60, 8);

  
  }



function dibujarLampara(ctx) {
  const cx = 150, cy = 75;
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(cx, cy, 50, 0, Math.PI, true); // pantalla
  ctx.fill();
  ctx.fillStyle = "green";
  ctx.fillRect(cx - 1, cy, 10, 50); // soporte
   ctx.fillStyle = "green";
  ctx.fillRect(cx - 30, cy, 1, 10); // soporte
}

const objetos = [
    
    { nombre: "Flor", tipo: "vivo", dibujo: dibujarFlor },
    { nombre: "Pajaro", tipo: "vivo", dibujo: dibujarPajaro },
    { nombre: "Pez", tipo: "vivo", dibujo: dibujarPez },
    { nombre: "Tortuga", tipo: "vivo", dibujo: dibujarTortuga },
    { nombre: "Rana", tipo: "vivo", dibujo: dibujarRana },
    { nombre: "Bacteria", tipo: "vivo", dibujo: dibujarBacteria },
    { nombre: "Mariposa", tipo: "vivo", dibujo: dibujarMariposa },
    { nombre: "Pulpo", tipo: "vivo", dibujo: dibujarPulpo },
     { nombre: "Araña", tipo: "vivo", dibujo: dibujarArana },

    { nombre: "Roca", tipo: "no vivo", dibujo: dibujarRoca },
    { nombre: "Auto", tipo: "no vivo", dibujo: dibujarAuto },
    { nombre: "Ladrillo", tipo: "no vivo", dibujo: dibujarLadrillo },
    { nombre: "Casa", tipo: "no vivo", dibujo: dibujarCasa },
    { nombre: "Camara", tipo: "no vivo", dibujo: dibujarCamara },
    { nombre: "Mesa", tipo: "no vivo", dibujo: dibujarMesa },
    { nombre: "Computadora", tipo: "no vivo", dibujo: dibujarComputadora },
    { nombre: "Lampara", tipo: "no vivo", dibujo: dibujarLampara },  


  ];

    let cartasActuales = [];
    let cartasClasificadas = 0;
    let huboErrorEnRonda = false;
    let correctos = 0;
    let incorrectos = 0;
    let tiempo = 300;
    let interval;

    function iniciarTemporizador() {
        interval = setInterval(function () {
            if (tiempo > 0) {
                tiempo--;
                let minutos = Math.floor(tiempo / 60);
                let segundos = tiempo % 60;
                document.getElementById('tiempo').innerText = `${minutos.toString().padStart(2, '0')}:${segundos.toString().padStart(2, '0')}`;
            } else {
                clearInterval(interval);
                finalizarJuego();
            }
        }, 1000);
    }

    function finalizarJuego() {
        clearInterval(interval);
        const resultadoFinal = correctos - incorrectos;
        let nota = resultadoFinal >= 20 ? "A" : resultadoFinal >= 10 ? "B" : resultadoFinal >= 5 ? "C" : "F";
        document.getElementById('puntajeFinal').innerText = resultadoFinal;
        document.getElementById('nota').innerText = nota;
        document.getElementById('resultado').style.display = 'block';
    }

    function salir() {
        window.location.href = "Naturalgames.html";
    }

    function mostrarCartasRonda() {
        cartasActuales = [];
        cartasClasificadas = 0;
        huboErrorEnRonda = false;

        for (let i = 0; i < 3; i++) {
            const indice = Math.floor(Math.random() * objetos.length);
            const carta = objetos[indice];
            cartasActuales.push(carta);
            document.getElementById(`nombre${i}`).innerText = carta.nombre;
            const canvas = document.getElementById(`canvasCarta${i}`);
            if (!canvas) continue;
            const ctx = canvas.getContext("2d");
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            carta.dibujo(ctx);
        }
    }

    function arrastrar(ev) {
        ev.dataTransfer.setData("index", ev.target.getAttribute("data-index"));
    }

    function permitirSoltar(ev) {
        ev.preventDefault();
    }

    const sonidoCorrecto = new Audio('../sonidos/correct-156911.mp3');
const sonidoIncorrecto = new Audio('../sonidos/error-3-125761.mp3');

  function soltar(ev) {
    ev.preventDefault();
    const tipoCaja = ev.currentTarget.getAttribute("data-tipo");
    const index = parseInt(ev.dataTransfer.getData("index"));
    const carta = cartasActuales[index];

    if (carta && tipoCaja === carta.tipo) {
        // Si es correcto no marcamos error
    } else {
        huboErrorEnRonda = true;
    }

    // Ocultar carta clasificada
    document.getElementById(`carta${index}`).style.visibility = "hidden";
    cartasClasificadas++;

    // Cuando ya se clasificaron las 3 cartas
    if (cartasClasificadas === 3) {
        if (huboErrorEnRonda) {
            incorrectos++;
            document.getElementById("incorrectos").innerText = incorrectos;
            sonidoIncorrecto.currentTime = 0; // reinicia el audio
            sonidoIncorrecto.play();
        } else {
            correctos++;
            document.getElementById("correctos").innerText = correctos;
            sonidoCorrecto.currentTime = 0;
            sonidoCorrecto.play();
        }

        // Esperar 1s y mostrar nuevas cartas
        setTimeout(() => {
            for (let i = 0; i < 3; i++) {
                document.getElementById(`carta${i}`).style.visibility = "visible";
            }
            mostrarCartasRonda();
        }, 1000);
    }
}


    function iniciarJuego() {
        iniciarTemporizador();
        mostrarCartasRonda();
    }

    window.onload = iniciarJuego;
</script>

</body>
</html>
