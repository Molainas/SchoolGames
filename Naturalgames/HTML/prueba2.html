<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naturalgames</title>
</head>
<body>

<div class="cubo">
    <div class="cubo1">
        <div class="cuadro" id="categoria-animales" ondrop="drop(event)" ondragover="allowDrop(event)">
            <div class="nombre">Animales</div>
            <img src="../imagenes/fotos.png" class="img1">
        </div>
        <div class="cuadro" id="categoria-plantas" ondrop="drop(event)" ondragover="allowDrop(event)">
            <div class="nombre">Plantas</div>
            <img src="../imagenes/fotos.png" class="img1">
        </div>
        <div class="tiempo" id="tiempo">05:00</div>
        <div class="cuadro" id="categoria-hongos" ondrop="drop(event)" ondragover="allowDrop(event)">
            <div class="nombre">Hongos</div>
            <img src="../imagenes/fotos.png" class="img1">
        </div>
        <div class="cuadro" id="categoria-bacterias" ondrop="drop(event)" ondragover="allowDrop(event)">
            <div class="nombre">Bacterias</div>
            <img src="../imagenes/fotos.png" class="img1">
        </div>
    </div>

    <div class="cubo2">
        <div class="correcto">C: <span id="correctos">0</span></div>
        <img src="../imagenes/peque.png" class="img2">
        <div class="incorrecto">F: <span id="incorrectos">0</span></div>
    </div>

    <div class="cubo3">
        <div class="foto" id="objeto" draggable="true" ondragstart="drag(event)">
            <canvas id="canvas-objeto" width="200" height="200"></canvas>
        </div>
    </div>
</div>

<div id="resultado" class="res" style="display:none;">
    <h2>Juego terminado</h2>
    <p>Puntuaci√≥n final: <span id="puntajeFinal"></span></p>
    <p>Nota: <span id="nota"></span></p>
    <div class="botones">
        <button class="boton2" onclick="location.reload()">Reiniciar</button>
        <button class="boton2" onclick="salir()">Escoger otro</button>
    </div>
</div>

 <style>
        @import url("../CSS/prueba2.css");
    </style>

<script>
    function dibujarPerro(ctx) {
        ctx.clearRect(0, 0, 200, 200);
        ctx.fillStyle = "yellow";
        ctx.beginPath();
        ctx.arc(100, 100, 40, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "yellow";
        ctx.beginPath();
        ctx.ellipse(135, 80, 15, 25, -Math.PI / 8, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.ellipse(65, 80, 15, 25, Math.PI / 8, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "green";
        ctx.beginPath();
        ctx.arc(85, 95, 7, 0, Math.PI * 2);
        ctx.arc(115, 95, 7, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "yellow";
        ctx.beginPath();
        ctx.arc(85, 95, 3, 0, Math.PI * 2);
        ctx.arc(115, 95, 3, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "yellow";
        ctx.beginPath();
        ctx.ellipse(100, 115, 18, 12, 0, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "green";
        ctx.beginPath();
        ctx.arc(100, 110, 4, 0, Math.PI * 2);
        ctx.fill();

        ctx.strokeStyle = "green";
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(100, 114);
        ctx.lineTo(100, 120);
        ctx.moveTo(100, 120);
        ctx.quadraticCurveTo(95, 125, 90, 122);
        ctx.moveTo(100, 120);
        ctx.quadraticCurveTo(105, 125, 110, 122);
        ctx.stroke();
    }

    function dibujarOso(ctx) {
        ctx.clearRect(0, 0, 200, 200);
        ctx.fillStyle = "yellow";
        ctx.beginPath();
        ctx.arc(100, 100, 40, 0, Math.PI * 2);
        ctx.fill();

        ctx.beginPath();
        ctx.arc(70, 70, 12, 0, Math.PI * 2);
        ctx.arc(130, 70, 12, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "green";
        ctx.beginPath();
        ctx.arc(70, 70, 6, 0, Math.PI * 2);
        ctx.arc(130, 70, 6, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "green";
        ctx.beginPath();
        ctx.arc(85, 100, 4, 0, Math.PI * 2);
        ctx.arc(115, 100, 4, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "green";
        ctx.beginPath();
        ctx.ellipse(100, 115, 15, 15, 0, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "yellow";
        ctx.beginPath();
        ctx.arc(100, 112, 4, 0, Math.PI * 2);
        ctx.fill();

        ctx.strokeStyle = "yellow";
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(100, 116);
        ctx.lineTo(100, 122);
        ctx.moveTo(100, 122);
        ctx.quadraticCurveTo(95, 126, 90, 123);
        ctx.moveTo(100, 122);
        ctx.quadraticCurveTo(105, 126, 110, 123);
        ctx.stroke();
    }

    function dibujarArbol(ctx) {
        ctx.clearRect(0, 0, 200, 200);
        ctx.fillStyle = "yellow";
        ctx.fillRect(90, 100, 20, 60);
        ctx.fillStyle = "green";
        ctx.beginPath();
        ctx.arc(100, 80, 40, 0, Math.PI * 2);
        ctx.fill();
    }

    function dibujarFlor(ctx) {
        ctx.clearRect(0, 0, 200, 200);
        ctx.fillStyle = "yellow";
        for (let i = 0; i < 8; i++) {
            const angle = (i * Math.PI) / 4;
            const x = 100 + Math.cos(angle) * 30;
            const y = 100 + Math.sin(angle) * 30;
            ctx.beginPath();
            ctx.ellipse(x, y, 25, 25, angle, 0, Math.PI * 2);
            ctx.fill();
        }
        ctx.fillStyle = "green";
        ctx.beginPath();
        ctx.arc(100, 100, 25, 0, Math.PI * 2);
        ctx.fill();
    }

    function dibujarHongo1(ctx) {
        ctx.clearRect(0, 0, 200, 200);
        ctx.fillStyle = "green";
        ctx.beginPath();
        ctx.arc(100, 80, 40, 0, Math.PI, true);
        ctx.fill();
        ctx.fillStyle = "yellow";
        ctx.fillRect(80, 80, 40, 60);
    }

    function dibujarHongo2(ctx) {
        ctx.clearRect(0, 0, 200, 200);
        ctx.fillStyle = "yellow";
        ctx.beginPath();
        ctx.arc(100, 80, 40, 0, Math.PI, true);
        ctx.fill();
        ctx.fillStyle = "green";
        ctx.fillRect(90, 80, 20, 60);
    }

    function dibujarBacteria1(ctx) {
        ctx.clearRect(0, 0, 200, 200);
        ctx.fillStyle = "yellow";
        ctx.beginPath();
        ctx.ellipse(100, 100, 50, 30, 0, 0, Math.PI * 2);
        ctx.fill();
    }

    function dibujarBacteria2(ctx) {
        ctx.clearRect(0, 0, 200, 200);
        ctx.fillStyle = "green";
        ctx.beginPath();
        ctx.ellipse(100, 100, 50, 50, 0, 0, Math.PI * 2);
        ctx.fill();
        ctx.strokeStyle = "yellow";
        ctx.lineWidth = 2;
        ctx.stroke();
        ctx.fillStyle = "yellow";
        ctx.beginPath();
        ctx.ellipse(100, 100, 30, 30, 0, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "green";
        for (let i = 0; i < 5; i++) {
            const x = 100 + (Math.random() * 30 - 15);
            const y = 100 + (Math.random() * 20 - 10);
            ctx.beginPath();
            ctx.arc(x, y, 3, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    const objetos = [
        { nombre: "Perro", categoria: "categoria-animales", dibujo: dibujarPerro },
        { nombre: "Oso", categoria: "categoria-animales", dibujo: dibujarOso },
        { nombre: "Roble", categoria: "categoria-plantas", dibujo: dibujarArbol },
        { nombre: "Margarita", categoria: "categoria-plantas", dibujo: dibujarFlor },
        { nombre: "Hongo de miel", categoria: "categoria-hongos", dibujo: dibujarHongo1 },
        { nombre: "Campinion", categoria: "categoria-hongos", dibujo: dibujarHongo2 },
        { nombre: "Moho", categoria: "categoria-bacterias", dibujo: dibujarBacteria1 },
        { nombre: "Coco", categoria: "categoria-bacterias", dibujo: dibujarBacteria2 }
    ];

    let correctos = 0;
    let incorrectos = 0;
    let tiempo = 300;
    let interval;
    let objetoActual;
    const canvas = document.getElementById("canvas-objeto");
    const ctx = canvas.getContext("2d");

    function iniciarTemporizador() {
        interval = setInterval(function () {
            if (tiempo > 0) {
                tiempo--;
                let minutos = Math.floor(tiempo / 60);
                let segundos = tiempo % 60;
                document.getElementById('tiempo').innerText = 
                    `${minutos.toString().padStart(2, '0')}:${segundos.toString().padStart(2, '0')}`;
            } else {
                clearInterval(interval);
                finalizarJuego();
            }
        }, 1000);
    }

    function cargarObjeto() {
        objetoActual = objetos[Math.floor(Math.random() * objetos.length)];
        objetoActual.dibujo(ctx); // Dibuja el objeto en el canvas

        // Mostrar el nombre del objeto en el canvas
        ctx.fillStyle = "yellow";
        ctx.font = "bold 16px Cursive";
        ctx.textAlign = "center";
        ctx.fillText(objetoActual.nombre, canvas.width / 2, canvas.height - 25);
    }

    function allowDrop(ev) { ev.preventDefault(); }
    function drag(ev) { ev.dataTransfer.setData("text", ev.target.id); }

const sonidoCorrecto = new Audio('../sonidos/correct-156911.mp3');
const sonidoIncorrecto = new Audio('../sonidos/error-3-125761.mp3');

    function drop(ev) {
        ev.preventDefault();
        const categoria = ev.currentTarget.id;
        if (categoria === objetoActual.categoria) {
            correctos++;
            document.getElementById("correctos").innerText = correctos;
             sonidoCorrecto.play(); 
        } else {
            incorrectos++;
            document.getElementById("incorrectos").innerText = incorrectos;
             sonidoIncorrecto.play();  
        }
        cargarObjeto();
    }

    function finalizarJuego() {
        clearInterval(interval);
        const resultadoFinal = correctos - incorrectos;
        let nota = resultadoFinal >= 20 ? "A" : resultadoFinal >= 10 ? "B" : resultadoFinal >= 5 ? "C" : "F";
        document.getElementById('puntajeFinal').innerText = resultadoFinal;
        document.getElementById('nota').innerText = nota;
        document.getElementById('resultado').style.display = 'block';
    }

    function salir() {
        window.location.href = "Naturalgames.html";
    }

    function iniciarJuego() {
        cargarObjeto();
        iniciarTemporizador();
    }

    window.onload = iniciarJuego;
</script>

</body>
</html>
