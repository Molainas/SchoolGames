<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mategames</title>
</head>
<body>
    <div class="cubo">
         <div class="relleno"></div>
        <div class="game">
            <div class="puntos" id="puntajes">
                <div class="correcto"><p> <span id="correctos">C: 0</span></p></div>
                 <img src="../imagenes/3.png">
                <div class="incorrecto"><p> <span id="incorrectos">F: 0</span></p></div>
            </div>
            <div class="conjunto">
                <div class="lineas">
                    <div class="linea"></div>
                    <div class="linea"></div>
                    <div class="linea"></div>
                    <div class="linea"></div>
                    <div class="linea"></div>
                    <div class="linea"></div>
                    <div class="linea"></div>
                </div>
                <div class="ejercicio">
                    <div class="cubiculo" id="numero1"></div>
                    <div class="cubiculo"><span id="operador1">?</span></div>
                    <div class="cubiculo" id="numero2"></div>
                    <div class="cubiculo"><span id="operador2">?</span></div>
                    <div class="cubiculo" id="numero3"></div>
                    <div class="cubiculo">=</div>
                    <div class="cubiculo" id="resultado"></div>
                </div>
                <div class="lineas">
                    <div class="linea"></div>
                    <div class="linea"></div>
                    <div class="linea"></div>
                    <div class="linea"></div>
                    <div class="linea"></div>
                    <div class="linea"></div>
                    <div class="linea"></div>
                </div>
            </div>
            <div class="tr">
                <div class="cubiculo2">
                    <button class="scroll-button" onclick="scrolleft('scrollContainer1')">◀</button>
                    <div class="scroll-container" id="scrollContainer1" onscroll="actualizarOperacion(1)">
                        <div class="cubiculo1">
                            <span>+</span>
                            <span>-</span>
                            <span>*</span>
                        </div>
                    </div>
                    <button class="scroll-button" onclick="scrollRight('scrollContainer1')">▶</button>
                </div>
                <div class="cubiculo2">
                    <button class="scroll-button" onclick="scrolleft('scrollContainer2')">◀</button>
                    <div class="scroll-container" id="scrollContainer2" onscroll="actualizarOperacion(2)">
                        <div class="cubiculo1">
                            <span>+</span>
                            <span>-</span>
                            <span>*</span>
                        </div>
                    </div>
                    <button class="scroll-button" onclick="scrollRight('scrollContainer2')">▶</button>
                </div>
            </div>
            <div class="tiempo">
                <button class="verificacion" onclick="verificar()">Verificar</button>
                <p id="tiempo">3:00</p>
            </div>
        </div>
         <div class="relleno"></div>
    </div>


<div id="final" class="res">
    <h2>Juego terminado</h2>
    <p>Puntuación final: <span id="puntajeFinal"></span></p>
    <p>Nota: <span id="nota"></span></p>
    <div class="sepa">
        <button onclick="location.reload()">Reiniciar</button>
        <button onclick="salir()">Escoger otro</button>
    </div>
</div>

<style>
    @import url("../CSS/prueba3,2.css")
</style>

    <script>
        let tiempoRestante = 180;
        let juegoActivo = true;
        let respuestasCorrectas = 0;
        let respuestasIncorrectas = 0;
        let operadores = ['+', '-', '*'];
        let numero1, numero2, numero3, operacion1, operacion2, resultado;
        
        function scrolleft(id) {
            document.getElementById(id).scrollLeft -= 50;
        }

        function scrollRight(id) {
            document.getElementById(id).scrollLeft += 50;
        }

        function actualizarOperacion(num) {
            let container = document.getElementById(`scrollContainer${num}`);
            let index = Math.round(container.scrollLeft / 50) % operadores.length;
            document.getElementById(`operador${num}`).textContent = operadores[index];
        }

       function generarEjercicio() {
    numero1 = Math.floor(Math.random() * 10) + 1;
    numero2 = Math.floor(Math.random() * 10) + 1;
    numero3 = Math.floor(Math.random() * 10) + 1;
    operacion1 = operadores[Math.floor(Math.random() * 3)];
    operacion2 = operadores[Math.floor(Math.random() * 3)];

    if (operacion1 === '-' && numero1 < numero2) {
        [numero1, numero2] = [numero2, numero1]; 
    }
    
    switch (operacion1) {
        case '+': resultado = numero1 + numero2; break;
        case '-': resultado = numero1 - numero2; break;
        case '*': resultado = numero1 * numero2; break;
    }

    if (operacion2 === '-' && resultado < numero3) {
        [resultado, numero3] = [numero3, resultado]; 
    }

    switch (operacion2) {
        case '+': resultado += numero3; break;
        case '-': resultado -= numero3; break;
        case '*': resultado *= numero3; break;
    }

    document.getElementById("numero1").textContent = numero1;
    document.getElementById("numero2").textContent = numero2;
    document.getElementById("numero3").textContent = numero3;
    document.getElementById("resultado").textContent = resultado;
    document.getElementById("operador1").textContent = '?';
    document.getElementById("operador2").textContent = '?';
}

const sonidoCorrecto = new Audio('../sonidos/correct-156911.mp3');
const sonidoIncorrecto = new Audio('../sonidos/error-3-125761.mp3');

        function verificar() {
            if (!juegoActivo) return;
            let operadorSeleccionado1 = document.getElementById("operador1").textContent;
            let operadorSeleccionado2 = document.getElementById("operador2").textContent;
            
            if (operadorSeleccionado1 === operacion1 && operadorSeleccionado2 === operacion2) {
                respuestasCorrectas++;
                 sonidoCorrecto.play(); 
            } else {
                respuestasIncorrectas++;
                  sonidoIncorrecto.play();
            }
            
            document.getElementById("correctos").textContent = "C: " + respuestasCorrectas;
            document.getElementById("incorrectos").textContent = "F: " + respuestasIncorrectas;
            generarEjercicio();
        }

  function mostrarResultado() {
    let puntajeFinal = respuestasCorrectas - respuestasIncorrectas;
    let nota = puntajeFinal >= 15 ? "A" : puntajeFinal >= 10 ? "B" : puntajeFinal >= 5 ? "C" : "F";
    document.getElementById('puntajeFinal').innerText = puntajeFinal;
    document.getElementById('nota').innerText = nota;
    document.getElementById('final').style.display = 'block'; 
}

        
      function iniciarTemporizador() {
    let intervalo = setInterval(() => {
        if (tiempoRestante > 0) {
            tiempoRestante--;
            let minutos = Math.floor(tiempoRestante / 60);
            let segundos = tiempoRestante % 60;
            document.getElementById("tiempo").textContent = `${minutos}:${segundos < 10 ? '0' + segundos : segundos}`;
        } else {
            clearInterval(intervalo); 
            juegoActivo = false;
            mostrarResultado(); 
        }
    }, 1000);
}

        window.onload = function() {
            generarEjercicio();
            iniciarTemporizador();
        };
    </script>
</body>
</html>

